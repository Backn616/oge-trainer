<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>–ï–ì–≠ ‚Äî –≠–∫–∑–∞–º–µ–Ω –ø–æ–ª–Ω–æ—Å—Ç—å—é: –≤—ã–±–æ—Ä –≤–∞—Ä–∏–∞–Ω—Ç–∞</title>
  <meta name="description" content="–í—ã–±–æ—Ä –≤–∞—Ä–∏–∞–Ω—Ç–∞ –¥–ª—è –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏—è –ø–æ–ª–Ω–æ–≥–æ —ç–∫–∑–∞–º–µ–Ω–∞ (–∑–∞–¥–∞–Ω–∏—è 1‚Äì4) —É—Å—Ç–Ω–æ–π —á–∞—Å—Ç–∏ –ï–ì–≠." />

  <!-- –®—Ä–∏—Ñ—Ç—ã + preconnect -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">

  <!-- –ê–Ω—Ç–∏-–º–∏–≥–∞–Ω–∏–µ —Ç–µ–º—ã -->
  <script>
    (function () {
      try {
        const saved = localStorage.getItem('pref-theme') || 'light';
        if (saved === 'dark') document.documentElement.classList.add('dark');
      } catch (_) {}
    })();
  </script>

  <style>
    :root {
      --bg:#f7f9ff; --card:#fff; --text:#0b1020; --muted:#5a6475;
      --primary:#2b6cff; --primary-600:#1f58d9; --ring:#bfd3ff;
      --success:#25c26e; --shadow:0 10px 25px rgba(17,24,39,.08);
      --btn-1:#6d95ff; --btn-2:#4f7dff; --btn-text:#fff;
      --radius-xl:20px; --grid-gap:40px;
      --btn-fs:20px; --btn-pad-y:18px; --btn-pad-x:24px; --btn-minh:56px; --btn-radius:14px;
    }
    .dark{
      --bg:#0b1020; --card:rgba(255,255,255,.08); --text:#eaf0ff; --muted:#b9c2d3;
      --primary:#6aa3ff; --primary-600:#4b8dff; --ring:#a9c6ff;
      --success:#5ee397; --shadow:0 10px 35px rgba(0,0,0,.35);
      --btn-1:#aecdff; --btn-2:#86b8ff; --btn-text:#fff;
    }

    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0; font-family:Inter, system-ui, Segoe UI, Roboto, Arial, sans-serif; color:var(--text);
      background:
        radial-gradient(1200px 600px at 70% -10%, #29417a40, transparent),
        radial-gradient(900px 500px at -10% 10%, #344b9340, transparent),
        var(--bg);
    }
    a{color:inherit; text-decoration:none}
    .wrap{max-width:1040px; margin:0 auto; padding:24px}

    header{display:flex; justify-content:space-between; align-items:center; gap:16px; padding:8px 0;}
    .brand{display:flex; align-items:center; gap:12px}
    .logo{
      width:42px; height:42px; border-radius:12px;
      background: linear-gradient(135deg, var(--primary), #9bd0ff);
      box-shadow: 0 6px 18px rgba(0,0,0,.25), inset 0 0 12px #ffffff33;
      display:grid; place-items:center; color:#001133; font-weight:800;
    }
    .brand-title{font-weight:700; letter-spacing:.2px}
    .badge{font-size:12px; color:var(--muted)}
    .theme-toggle{
      border:1px solid #ffffff22; background:transparent; color:var(--text);
      padding:10px 14px; border-radius:10px; cursor:pointer; transition:transform .08s ease;
    }
    .theme-toggle:active{transform:scale(.98)}
    .theme-toggle:focus-visible{ box-shadow:0 0 0 4px var(--ring); outline:none; }

    main{padding:40px 0 24px}
    .card{
      background:var(--card); border:1px solid #ffffff1f; border-radius: var(--radius-xl);
      padding:28px; box-shadow:var(--shadow); backdrop-filter: blur(10px);
    }
    .h1{font-size:clamp(26px,5vw,36px); line-height:1.15; margin:0 0 10px}
    .sub{color:var(--muted); font-size:16px; margin:0 0 18px}

    .frame{
      border:1px solid #ffffff22; border-radius: calc(var(--radius-xl) - 2px);
      background:#ffffff06; backdrop-filter: blur(6px);
      padding:22px; margin-top:12px;
    }

    /* 3 ‚Üí 2 ‚Üí 1 –∫–æ–ª–æ–Ω–∫–∏ */
    .grid{
      display:grid;
      grid-template-columns: repeat(3, minmax(220px,1fr));
      gap: var(--grid-gap);
    }
    @media (max-width:900px){ .grid{ grid-template-columns: repeat(2, minmax(220px,1fr)); } }
    @media (max-width:580px){ .grid{ grid-template-columns: 1fr; } }

    .variant{
      display:inline-flex; align-items:center; justify-content:center; gap:10px;
      font-size: var(--btn-fs); font-weight:600; padding: var(--btn-pad-y) var(--btn-pad-x);
      min-height: var(--btn-minh); border-radius: var(--btn-radius);
      border:1px solid rgba(255,255,255,.18);
      background: linear-gradient(135deg, var(--btn-1), var(--btn-2));
      color: var(--btn-text); text-shadow: 0 1px 0 rgba(0,0,0,.15);
      box-shadow: 0 12px 24px rgba(75,141,255,.28);
      transition: transform .06s ease, filter .2s ease, box-shadow .2s ease; cursor: pointer;
    }
    .variant:hover{ transform: translateY(-2px); filter: brightness(1.03) }
    .variant:focus-visible{ box-shadow: 0 0 0 4px var(--ring); outline: none; }

    .pager{ display:flex; align-items:center; justify-content:center; gap:12px; margin-top:20px; }
    .pager-btn{
      display:inline-flex; align-items:center; justify-content:center;
      padding:10px 14px; border-radius:10px; border:1px solid #ffffff22;
      background: var(--card); color: var(--text); cursor:pointer; box-shadow: var(--shadow);
      transition: transform .06s ease, filter .2s ease;
    }
    .pager-btn[disabled]{opacity:.6; cursor:not-allowed}
    .pager-btn:hover:not([disabled]){ transform: translateY(-1px); filter: brightness(1.02) }
    .pager-info{ color: var(--muted); font-size:14px }

    footer{padding:26px 0 10px; color:var(--muted); font-size:13px; text-align:center}
    .visually-hidden{ position:absolute !important; width:1px; height:1px; padding:0; margin:-1px; overflow:hidden; clip:rect(0 0 0 0); white-space:nowrap; border:0; }
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <a class="brand back-to-menu" href="#" aria-label="–ù–∞–∑–∞–¥ –∫ —Å–ø–∏—Å–∫—É —Ä–µ–∂–∏–º–æ–≤">
        <div class="logo">A</div>
        <div>
          <div class="brand-title">–û–Ω–ª–∞–π–Ω-—Ç—Ä–µ–Ω–∞–∂—ë—Ä ¬´–ì–æ–≤–æ—Ä–µ–Ω–∏–µ¬ª</div>
          <div class="badge">–ï–ì–≠ ¬∑ —ç–∫–∑–∞–º–µ–Ω –ø–æ–ª–Ω–æ—Å—Ç—å—é</div>
        </div>
      </a>
      <div style="display:flex; gap:10px; align-items:center">
        <a class="back-to-menu" href="#" aria-label="–ö –≤—ã–±–æ—Ä—É –∑–∞–¥–∞–Ω–∏—è">‚Üê –ö –≤—ã–±–æ—Ä—É –∑–∞–¥–∞–Ω–∏—è</a>
        <button class="theme-toggle" id="themeBtn" aria-label="–ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å —Ç–µ–º—É">üåì –¢–µ–º–∞</button>
      </div>
    </header>

    <main>
      <section class="card">
        <h1 class="h1">–ï–ì–≠ ‚Äî —ç–∫–∑–∞–º–µ–Ω –ø–æ–ª–Ω–æ—Å—Ç—å—é: –≤—ã–±–µ—Ä–∏ –≤–∞—Ä–∏–∞–Ω—Ç</h1>
        <p class="sub">–ù–∞—á–Ω—ë–º —Å –∑–∞–¥–∞–Ω–∏—è 1 —ç—Ç–æ–≥–æ –≤–∞—Ä–∏–∞–Ω—Ç–∞, –∞ –¥–∞–ª—å—à–µ –ø–æ–π–¥—ë–º –ø–æ —Ü–µ–ø–æ—á–∫–µ 1‚Üí2‚Üí3‚Üí4.</p>

        <div class="frame">
          <nav id="variants" class="grid" aria-label="–í–∞—Ä–∏–∞–Ω—Ç—ã –ø–æ–ª–Ω–æ–≥–æ —ç–∫–∑–∞–º–µ–Ω–∞"></nav>

          <div class="pager" aria-label="–ü–∞–≥–∏–Ω–∞—Ü–∏—è –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤">
            <button id="prevBtn" class="pager-btn" type="button" aria-label="‚Üê –ù–∞–∑–∞–¥" aria-controls="variants">‚Üê –ù–∞–∑–∞–¥</button>
            <div id="pagerInfo" class="pager-info" aria-live="polite"></div>
            <button id="nextBtn" class="pager-btn" type="button" aria-label="–í–ø–µ—Ä—ë–¥ ‚Üí" aria-controls="variants">–í–ø–µ—Ä—ë–¥ ‚Üí</button>
            <span id="currentPageMarker" class="visually-hidden" aria-current="page">–°—Ç—Ä–∞–Ω–∏—Ü–∞ 1</span>
          </div>
        </div>
      </section>
    </main>

    <footer>¬© 2025 ‚Äî –î–µ–º–æ-–≤–µ—Ä—Å–∏—è —Ç—Ä–µ–Ω–∞–∂—ë—Ä–∞ –ï–ì–≠.</footer>
  </div>

  <script>
    (async function(){
      // –§–æ–ª–±—ç–∫–∏ –Ω–∞ —Å–ª—É—á–∞–π, –µ—Å–ª–∏ common.js –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω
      let navigateOnce = (url) => { location.href = url; };
      let toggleThemeInit = () => {
        const key = 'pref-theme';
        const btn = document.getElementById('themeBtn');
        const get = () => { try { return localStorage.getItem(key) || 'light'; } catch { return 'light'; } };
        const apply = (mode)=> {
          document.documentElement.classList.toggle('dark', mode === 'dark');
          try { localStorage.setItem(key, mode); } catch {}
        };
        apply(get());
        btn?.addEventListener('click', () => { const m = get(); apply(m === 'dark' ? 'light' : 'dark'); });
      };

      // –í—ã—á–∏—Å–ª—è–µ–º /ege/ –∏ –ø—Ä–æ–±—É–µ–º –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –æ–±—â–∏–π –º–æ–¥—É–ª—å
      const parts = location.pathname.split('/').filter(Boolean);
      const idx = parts.indexOf('ege');
      const egeBase = (idx !== -1) ? ('/' + parts.slice(0, idx + 1).join('/') + '/') : '/ege/';
      const commonUrl = (egeBase + 'common.js').replace(/\/{2,}/g, '/');

      try {
        const mod = await import(commonUrl);
        if (typeof mod.navigateOnce === 'function') navigateOnce = mod.navigateOnce;
        if (typeof mod.toggleThemeInit === 'function') toggleThemeInit = mod.toggleThemeInit;
      } catch (e) {
        console.warn('–ù–µ —É–¥–∞–ª–æ—Å—å –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å common.js:', commonUrl, e);
      }

      // –¢–µ–º–∞ ‚Äî –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º –≤ –ª—é–±–æ–º —Å–ª—É—á–∞–µ
      try { toggleThemeInit(); } catch {}

      // ¬´–ù–∞–∑–∞–¥ –∫ –º–µ–Ω—é¬ª
      document.querySelectorAll('.back-to-menu').forEach(a => {
        const url = egeBase + 'ege_menu.html';
        a.href = url;
        a.addEventListener('click', (e) => { e.preventDefault(); navigateOnce(url); });
      });

      // –†–µ–Ω–¥–µ—Ä –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ + –ø–∞–≥–∏–Ω–∞—Ü–∏—è
      const VARIANTS_BASE_TASK1 = egeBase + 'task1/variants/';
      const TOTAL_VARIANTS = 60;       // –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –ø–æ–º–µ–Ω—è–µ–º
      const PAGE_SIZE      = 15;

      const variantsEl    = document.getElementById('variants');
      const prevBtn       = document.getElementById('prevBtn');
      const nextBtn       = document.getElementById('nextBtn');
      const pagerInfo     = document.getElementById('pagerInfo');
      const currentMarker = document.getElementById('currentPageMarker');

      let currentPage = 1;
      const totalPages = Math.ceil(TOTAL_VARIANTS / PAGE_SIZE);

      function renderPage(page){
        currentPage = Math.min(Math.max(1, page), totalPages);
        variantsEl.innerHTML = '';

        const start = (currentPage - 1) * PAGE_SIZE + 1;
        const end   = Math.min(TOTAL_VARIANTS, start + PAGE_SIZE - 1);

        const frag = document.createDocumentFragment();
        for(let n = start; n <= end; n++){
          const btn = document.createElement('button');
          btn.type = 'button';
          btn.className = 'variant';
          btn.textContent = `–í–∞—Ä–∏–∞–Ω—Ç ${n}`;
          btn.setAttribute('aria-label', `–ü–µ—Ä–µ–π—Ç–∏ –∫ –≤–∞—Ä–∏–∞–Ω—Ç—É ${n}`);
          btn.addEventListener('click', () => {
            // 1) —Ñ–ª–∞–≥ ¬´—Ä–µ–∂–∏–º —ç–∫–∑–∞–º–µ–Ω–∞¬ª
            try {
              sessionStorage.setItem('exam_flow', '1');
              sessionStorage.setItem('exam_variant', String(n));
              // 2) –æ—á–∏—Å—Ç–∏–º –ø—Ä–æ—à–ª—ã–µ –∑–∞–ø–∏—Å–∏, –Ω–∞ –≤—Å—è–∫–∏–π
              ['ege1_', 'ege2_', 'ege3_', 'ege4_'].forEach(prefix=>{
                Object.keys(sessionStorage).forEach(k=>{ if(k.startsWith(prefix)) sessionStorage.removeItem(k); });
              });
            } catch {}
            // 3) —Å—Ç–∞—Ä—Ç—É–µ–º —Å Task 1 ‚Üí prepare –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ –≤–∞—Ä–∏–∞–Ω—Ç–∞ + ?variant=n
            const url = `${VARIANTS_BASE_TASK1}variant${n}/ege1_var${n}_1_prepare.html?variant=${n}`
              .replace(/\/{2,}/g, '/').replace(':/','://');
            navigateOnce(url);
          });
          frag.appendChild(btn);
        }
        variantsEl.appendChild(frag);

        pagerInfo.textContent = `–°—Ç—Ä. ${currentPage} –∏–∑ ${totalPages} ¬∑ ${start}‚Äì${end} –∏–∑ ${TOTAL_VARIANTS}`;
        prevBtn.disabled = currentPage === 1;
        nextBtn.disabled = currentPage === totalPages;
        prevBtn.setAttribute('aria-disabled', String(prevBtn.disabled));
        nextBtn.setAttribute('aria-disabled', String(nextBtn.disabled));
        currentMarker.textContent = `–°—Ç—Ä–∞–Ω–∏—Ü–∞ ${currentPage}`;
      }

      prevBtn.addEventListener('click', () => renderPage(currentPage - 1));
      nextBtn.addEventListener('click', () => renderPage(currentPage + 1));
      renderPage(1);

      // BFCache: —Å–Ω—è—Ç—å ¬´–∑–∞–º–æ–∫¬ª (–µ—Å–ª–∏ navigateOnce –µ—Å—Ç—å)
      try { window.addEventListener('pageshow', () => { navigateOnce.lock = false; }); } catch {}
    })();
  </script>
</body>
</html>
