<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <title>Electronic assistant ‚Äî –¥–æ—Å—Ç—É–ø –∫ –º–∏–∫—Ä–æ—Ñ–æ–Ω—É</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <!-- –®—Ä–∏—Ñ—Ç -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Roboto&display=swap" rel="stylesheet">

  <!-- –û–±—â–∏–µ —Å—Ç–∏–ª–∏ -->
  <link rel="stylesheet" href="../../../style_common.css" />

  <!-- –ê–Ω—Ç–∏-–º–∏–≥–∞–Ω–∏–µ —Ç–µ–º—ã -->
  <script>
    (function(){
      try{
        const saved = localStorage.getItem('pref-theme') || 'light';
        if (saved === 'dark') document.documentElement.classList.add('dark');
      }catch(_){}
    })();
  </script>
</head>
<body>
  <!-- –¢—É–º–±–ª–µ—Ä —Ç–µ–º—ã -->
  <button id="themeBtn" class="theme-toggle" aria-label="–ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å —Ç–µ–º—É">üåì –¢–µ–º–∞</button>

  <main class="page-center">
    <section class="card mic-card"
             role="alertdialog"
             aria-labelledby="warnTitle"
             aria-describedby="warnText">
      <h1 id="warnTitle">–í–Ω–∏–º–∞–Ω–∏–µ</h1>
      <p id="warnText">
        –ù–∞ —Å–ª–µ–¥—É—é—â–µ–º —ç—Ç–∞–ø–µ —Ç—Ä–µ–Ω–∞–∂—ë—Ä –ø–æ–ø—ã—Ç–∞–µ—Ç—Å—è –ø–æ–ª—É—á–∏—Ç—å –¥–æ—Å—Ç—É–ø –∫ –º–∏–∫—Ä–æ—Ñ–æ–Ω—É.<br><br>
        –ë—Ä–∞—É–∑–µ—Ä –ø–æ–∫–∞–∂–µ—Ç —Å–∏—Å—Ç–µ–º–Ω—ã–π –∑–∞–ø—Ä–æ—Å –Ω–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –º–∏–∫—Ä–æ—Ñ–æ–Ω–∞.<br><br>
        –ï—Å–ª–∏ –≤—ã –≥–æ—Ç–æ–≤—ã –≤—ã–ø–æ–ª–Ω–∏—Ç—å —É—Å—Ç–Ω—É—é —á–∞—Å—Ç—å <strong>–∑–∞–¥–∞–Ω–∏—è 2</strong> (—Ç–µ–ª–µ—Ñ–æ–Ω–Ω—ã–π –æ–ø—Ä–æ—Å ‚Äî <em>Electronic assistant</em>), –ø–æ–∂–∞–ª—É–π—Å—Ç–∞,<br>
        <strong>—Ä–∞–∑—Ä–µ—à–∏—Ç–µ —Å–∞–π—Ç—É –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –º–∏–∫—Ä–æ—Ñ–æ–Ω</strong>, —á—Ç–æ–±—ã –∑–∞–ø–∏—Å–∞—Ç—å –≤–∞—à–∏ –æ—Ç–≤–µ—Ç—ã.
      </p>

      <!-- –°—Ç–∞–≤–∏–º href (fallback –±–µ–∑ JS) –∏ –¥—É–±–ª–∏—Ä—É–µ–º –ø–µ—Ä–µ—Ö–æ–¥ —á–µ—Ä–µ–∑ JS —Å –∑–∞—â–∏—Ç–æ–π -->
      <a id="nextLink"
         class="button"
         type="button"
         href="#"
         role="button"
         aria-label="–ü–µ—Ä–µ–π—Ç–∏ –∫ –∑–∞–¥–∞–Ω–∏—é —Å –∑–∞–ø—Ä–æ—Å–æ–º –¥–æ—Å—Ç—É–ø–∞ –∫ –º–∏–∫—Ä–æ—Ñ–æ–Ω—É"
         autofocus>
        –û–ö
      </a>
    </section>
  </main>

  <script type="module">
    import { toggleThemeInit, navigateOnce } from '../../../common.js';

    // –¢–µ–º–∞
    toggleThemeInit();

    // –°–ª–µ–¥—É—é—â–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ (task)
    const NEXT_URL = /_2_mic\.html$/i.test(location.pathname)
      ? location.pathname.replace(/_2_mic\.html$/i, '_3_task.html')
      : location.pathname.replace(/\.html$/i, '_3_task.html');

    // –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ sessionStorage –¥–ª—è –û–ì–≠-2
    try {
      sessionStorage.removeItem('oge2_audio_base64');
      sessionStorage.removeItem('oge2_audio_mime');
      sessionStorage.setItem('oge2_warned', '1');
      const meta = JSON.parse(sessionStorage.getItem('oge2_meta') || '{}');
      meta.warnedAt = Date.now();
      meta.task = 'OGE-2';
      meta.questionsPlanned = meta.questionsPlanned ?? 6;
      meta.perQuestionSec = meta.perQuestionSec ?? 40;
      sessionStorage.setItem('oge2_meta', JSON.stringify(meta));
    } catch {}

    // –ö–Ω–æ–ø–∫–∞ ¬´–û–ö¬ª ‚Äî –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–∞—è —Ç–æ—á–∫–∞ –ø–µ—Ä–µ—Ö–æ–¥–∞
    const a = document.getElementById('nextLink');
    a.href = NEXT_URL; // fallback, –µ—Å–ª–∏ JS –æ—Ç–∫–ª—é—á—ë–Ω
    a.addEventListener('click', (e) => {
      e.preventDefault();
      navigateOnce(NEXT_URL);
    });

    // BFCache: —Å–Ω—è—Ç—å –∑–∞–º–æ–∫ –ø—Ä–∏ –≤–æ–∑–≤—Ä–∞—Ç–µ
    window.addEventListener('pageshow', () => { navigateOnce.lock = false; });
  </script>
</body>
</html>
